<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Anonymous Chat</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- Setup Section -->
    <div class="setup-section room-setup" id="roomSetup">
      <!-- Admin Login (Hidden by default) -->
      <div class="input-group" id="adminSection" style="display: none;">
        <label for="adminKey">Admin Access</label>
        <input type="password" id="adminKey" class="room-code-input" placeholder="Enter admin key" autocomplete="off" />
        <button class="btn secondary" onclick="checkAdminAccess()" style="margin-bottom: 15px;">Login as Admin</button>
      </div>
      
      <!-- Regular User Interface -->
      <div id="userInterface">
        <div class="input-group">
          <label for="roomCode">Room Code</label>
          <input type="text" id="roomCode" class="room-code-input" placeholder="Enter room code to join" autocomplete="off" />
        </div>
        <button class="btn" onclick="joinRoom()">Join Room</button>
        <button class="btn secondary" onclick="showAdminLogin()" style="font-size: 12px; margin-top: 10px;">Admin Access</button>
      </div>
      
      <!-- Admin Interface (Hidden by default) -->
      <div id="adminInterface" style="display: none;">
        <div style="text-align: center; margin-bottom: 20px; color: #4CAF50;">
          <span style="font-size: 14px; font-weight: bold;">ðŸ”‘ Admin Mode Active</span>
        </div>
        <div class="input-group">
          <label for="adminRoomCode">Create New Room</label>
          <input type="text" id="adminRoomCode" class="room-code-input" placeholder="Enter custom room code or generate" autocomplete="off" />
        </div>
        <button class="btn" onclick="createRoom()">Create Room</button>
        <button class="btn secondary" onclick="generateRoomCode()">Generate Code</button>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #444;">
          <div class="input-group">
            <label for="joinRoomCode">Or Join Existing Room</label>
            <input type="text" id="joinRoomCode" class="room-code-input" placeholder="Enter room code to join" autocomplete="off" />
          </div>
          <button class="btn" onclick="joinExistingRoom()">Join Room</button>
        </div>
        <button class="btn secondary" onclick="logoutAdmin()" style="background: #666; margin-top: 15px;">Logout Admin</button>
      </div>
    </div>
    
    <!-- Chat Area -->
    <div class="chat-area" id="chatArea" style="display:none;">
      <div class="room-info">
        <span class="room-code" id="currentRoom"></span>
        <div class="room-info-buttons">
          <span id="userCount" style="color: #888; font-size: 12px; margin-right: 10px;">ðŸ‘¥ 0 online</span>
          <button class="danger" onclick="leaveRoom()">â¬… Leave</button>
        </div>
      </div>
      <div class="messages" id="messages">
        <div class="status">Loading messages...</div>
      </div>
      <div class="message-form">
        <input type="file" class="file-input" id="fileInput" accept="*/*" />
        <button class="file-btn" title="Attach File" onclick="document.getElementById('fileInput').click()">ðŸ“Ž</button>
        <input type="text" id="messageInput" class="message-input" placeholder="Type message..." maxlength="500" autocomplete="off" />
        <button class="btn-send" onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <div class="notification" id="notification"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
  
  <!-- Application Script -->
  <script src="app.js"></script>
</body>
</html>
